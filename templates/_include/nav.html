{% import '_macros/forms.html' as forms with context %}
{% import '_macros/utils.html' as utils with context %}

{% set url_blog = url('blog') %}
{% set url_search = url('search') %}
{% set url_staff_user_add = url('staff.user.add') %}
{% set url_staff_video_import = url('staff.video.import') %}
{% set url_tag_list = url('tag.list') %}
{% set url_video_list = url('video.list') %}

<span class="icon icon-menu max-sm" id="nav-mobile-menu-icon"></span>
<nav>
    <div class="nav-header">
        <h1 id="nav-heading">Channel 2</h1>
        <form action="{{ url_search }}" method="get" id="nav-search-form">
            <input type="text" name="q" placeholder="{% trans %}Search{% endtrans %}"{% if request.GET.q %} value="{{ request.GET.q }}"{% endif %}>
        </form>
    </div>
    <a href="{{ url_video_list }}" class="nav-item {{ utils.link_active(url_video_list) }}"><span class="icon icon-clock"></span> {% trans %}Latest{% endtrans %}</a>
    {% for tag in PINNED_TAG_LIST %}
        {% set url_tag = url('tag', args=[tag.id, tag.slug]) %}
        <a href="{{ url_tag }}" class="nav-item {{ utils.link_active(url_tag) }}"><span class="icon icon-right-open"></span> {{ tag.name }}</a>
    {% endfor %}
    <a href="{{ url_tag_list }}" class="nav-item {{ utils.link_active(url_tag_list) }}"><span class="icon icon-tag"></span> {% trans %}All Tags{% endtrans %}</a>
    <hr class="nav-sep">
    {% if user.is_staff %}
        <a href="{{ url_staff_user_add }}" class="nav-item {{ utils.link_active(url_staff_user_add) }}"><span class="icon icon-user-add"></span> {% trans %}Add User{% endtrans %}</a>
        <a href="#" class="nav-item"><span class="icon icon-plus-squared"></span> {% trans %}Add Video{% endtrans %}</a>
        <a href="{{ url_staff_video_import }}" class="nav-item {{ utils.link_active(url_staff_video_import) }}"><span class="icon icon-publish"></span> {% trans %}Import Videos{% endtrans %}</a>
        <hr class="nav-sep">
    {% endif %}
    <a href="{{ url_blog }}" class="nav-item {{ utils.link_active_starts_with(url_blog) }}"><span class="icon icon-newspaper"></span> {% trans %}News & Blog{% endtrans %}</a>
    <a class="nav-item" onclick="document.getElementById('nav-logout-form').submit();"><span class="icon icon-logout"></span> {% trans %}Logout{% endtrans %}</a>
    <form action="{{ url('account.logout') }}" method="post" id="nav-logout-form">
        {{ forms.csrf_input() }}
    </form>
</nav>
