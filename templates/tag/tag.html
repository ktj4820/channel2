{% extends 'base.html' %}
{% import '_macros/widgets.html' as widgets with context %}

{% block content %}
    <section>
        <h2 class="page-title">{{ tag.name }}</h2>
        {% if tag.html %}
            <div>{{ tag.html|safe }}</div>
        {% endif %}
        {% if tag_children_list %}
            <div class="tl-simple">{{ widgets.tag_list(tag_children_list) }}</div>
        {% endif %}
    </section>
    {% if tag_parent_list %}
        <section class="tl">
            {% for tag_p in tag_parent_list %}
                <div class="tli-wrapper">
                    <a href="{{ url('tag', args=[tag_p.id, tag_p.slug]) }}" class="tli" title="{{ tag_p.name }}">
                        <span class="tli-name">{{ tag_p.name }}</span>
                        <span class="badge space-left-5">{{ tag_p.count }}</span>
                        {% if tag_p.children_list %}
                            <div class="tl-simple">{{ widgets.tag_list(tag_p.children_list) }}</div>
                        {% endif %}
                    </a>
                </div>
            {% endfor %}
        </section>
    {% endif %}
    {% if video_list %}
        <section class="vl">
            {% for video in video_list %}
                {{ widgets.video(video) }}
            {% endfor %}
        </section>
    {% endif %}
{% endblock %}
